（3fs 好像与fuse有关）

1.https://developer.baidu.com/article/detail.html?id=417144

2.https://zhuanlan.zhihu.com/p/27177050370

3fs（Fire-Flyer File System）高速文件系统，专为深度学习训练中的样本数据读取场景进行优化。

文件系统缓存是操作系统中的一种缓存机制，用于加速文件的读取和写入操作。它可以将最近使用的文件或文件块缓存在内存中，以便下次访问时可以更快地读取或写入数据，从而提高文件访问的效率。

https://www.toutiao.com/article/7477446384875078196/?channel=&source=search_tab

3FS 采用典型的分布式文件系统架构（**分布式存储**：通过网络使用企业中的每台机器上的磁盘空间，并将这些分散的存储资源构成一个虚拟的存储设备，数据分散的存储在企业的各个角落。），客户端直接连接元数据和数据服务，整体设计清晰且高效。其核心组件包括：**元数据集群，数据集群**

![](https://pic1.zhimg.com/v2-d28aae9e92cabc601f9d0d46baa72c42_1440w.jpg)

3FS 明确将目标锁定在 AI 相关场景，专注于大文件和吞吐带宽优化，因此小文件性能的短板被有意规避

3FS身上融合了来自分布式数据库、对象存储和高性能计算领域的创新：FoundationDB 
提供强一致元数据存储，链式复制保障高可靠数据冗余，无缓存架构和 RDMA 
加速满足极致性能需求，用户态文件系统优化兼顾了灵活性和效率。可以说，3FS 
并非孤立发明每一个轮子，而是巧妙地把“业界最佳实践”集成到一个系统中。例如，从 Delta、Azure 借鉴链式复制的可靠性模型，从 WekaFS、Vast Data 全闪存直写的简洁路径，从 Alibaba、FAST 论文的 FUSE 提速的思路，再加以自身的工程实现，打造出了这样一个系统。

AI数据传输特点：吞吐量越大越好；大量大文件跨设备传输；要求随机读取，以满足训练随机取样的要求；小文件带来的延迟。

![image.png](attachment:8c045b01-5932-4d5c-ab9d-327dcfda0a77:image.png)

key&conclusion：

1. 无缓存IO
2. 异步文件操作  use AIO  io_uring
3. 新的文件传输协议（？）或者说格式：FFRecord:用于将多个小文件统合成一个或多个大文件，方便后续AIO的读写（3fs对于小文件随机存取这一功能舍去，以换来大文件的加速）

+-----------------------------------+---------------------------------------+

|         checksum                  |             N                         |


+-----------------------------------+---------------------------------------+

|         checksums                 |           offsets                     |


+---------------------+---------------------+--------+----------------------+

|      sample 1       |      sample 2       | ....   |      sample N        |

+---------------------+---------------------+--------+----------------------+

1. 对于fuse的优化 
2. foundationDB+链式复制

总结：3fs是综合了各方面新兴技术从而达成无缓存，异步AIO读写加速（利用文件格式FFRecord），大大提升AI训练以及推断过程中的训练数据传输速度

可能改进方向：

1.考虑到3fs本身是多个技术融合的结果，第一种改进思路是在不改变各个技术内部实现的情况下，优化其中的组织架构和接口实现

2.改进文件元数据的存储架构，即foundationDB(其具有强扩展性但效率不高)

3.改进FFRecord数据格式

4.优化底层架构fuse，（已有改进XFUSE，RFUSE）
